<!-- Minimal surrounding tags. We want maximum cut-and-paste potential and browsers do well even without them. -->

<p>
	The y axis is CRuby's pure-interpreter time for the benchmark divided by the named interpreter's time (YJIT, MJIT, TruffleRuby). Taller bars mean better performance. Each benchmark is scaled to the CRuby's interpreter's mean result, so CRuby's results are always exactly 1.0.
</p>

<table>
	<thead>  <th>bench</th>  <th>No JIT (ms)</th>  <th>No JIT RSD</th>  <th>YJIT (ms)</th>  <th>YJIT RSD</th>  <th>MJIT (ms)</th>  <th>MJIT RSD</th>  <th>YJIT spd</th>  <th>YJIT spd RSD</th>  <th>MJIT spd</th>  <th>MJIT spd RSD</th>  <th>% in YJIT</th>  </thead>
	<tbody style="text-align: right;">
		
			<tr style="border: 1px solid black;">
				 <td> cfunc_itself.rb </td> <td> 91.4 </td> <td> 0.12% </td> <td> 41.5 </td> <td> 0.45% </td> <td> 57.1 </td> <td> 0.20% </td> <td> 2.20x </td> <td> 0.46% </td> <td> 1.60x </td> <td> 0.23% </td> <td> 100.00% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> fib.rb </td> <td> 203.9 </td> <td> 0.15% </td> <td> 58.3 </td> <td> 0.03% </td> <td> 62.6 </td> <td> 0.03% </td> <td> 3.50x </td> <td> 0.15% </td> <td> 3.26x </td> <td> 0.15% </td> <td> 100.00% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> getivar.rb </td> <td> 90.5 </td> <td> 0.07% </td> <td> 36.3 </td> <td> 0.07% </td> <td> 91.6 </td> <td> 0.04% </td> <td> 2.50x </td> <td> 0.10% </td> <td> 0.99x </td> <td> 0.09% </td> <td> 86.57% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> respond_to.rb </td> <td> 230.3 </td> <td> 0.39% </td> <td> 155.9 </td> <td> 0.27% </td> <td> 201.5 </td> <td> 0.26% </td> <td> 1.48x </td> <td> 0.47% </td> <td> 1.14x </td> <td> 0.47% </td> <td> 100.00% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> setivar.rb </td> <td> 70.6 </td> <td> 0.07% </td> <td> 41.8 </td> <td> 0.32% </td> <td> 72.9 </td> <td> 0.07% </td> <td> 1.69x </td> <td> 0.32% </td> <td> 0.97x </td> <td> 0.10% </td> <td> 88.61% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> 30k_methods.rb </td> <td> 5998.7 </td> <td> 1.70% </td> <td> 725.0 </td> <td> 0.02% </td> <td> 6182.0 </td> <td> 0.14% </td> <td> 8.27x </td> <td> 1.70% </td> <td> 0.97x </td> <td> 1.71% </td> <td> 100.00% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> 30k_ifelse.rb </td> <td> 2221.3 </td> <td> 0.69% </td> <td> 329.1 </td> <td> 0.19% </td> <td> 2296.2 </td> <td> 0.96% </td> <td> 6.75x </td> <td> 0.71% </td> <td> 0.97x </td> <td> 1.18% </td> <td> 99.98% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> fannkuchredux </td> <td> 5476.5 </td> <td> 0.06% </td> <td> 5496.1 </td> <td> 0.10% </td> <td> 3946.1 </td> <td> 0.04% </td> <td> 1.00x </td> <td> 0.12% </td> <td> 1.39x </td> <td> 0.08% </td> <td> 0.00% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> nbody </td> <td> 115.2 </td> <td> 0.02% </td> <td> 115.2 </td> <td> 0.03% </td> <td> 69.7 </td> <td> 0.39% </td> <td> 1.00x </td> <td> 0.03% </td> <td> 1.65x </td> <td> 0.39% </td> <td> 7.40% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> binarytrees </td> <td> 367.1 </td> <td> 0.56% </td> <td> 307.0 </td> <td> 0.28% </td> <td> 254.6 </td> <td> 0.23% </td> <td> 1.20x </td> <td> 0.63% </td> <td> 1.44x </td> <td> 0.61% </td> <td> 82.95% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> psych-load </td> <td> 2163.2 </td> <td> 0.46% </td> <td> 1811.4 </td> <td> 0.62% </td> <td> 2006.8 </td> <td> 3.01% </td> <td> 1.19x </td> <td> 0.78% </td> <td> 1.08x </td> <td> 3.05% </td> <td> 63.86% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> lee </td> <td> 1145.3 </td> <td> 0.99% </td> <td> 810.1 </td> <td> 1.52% </td> <td> 873.0 </td> <td> 1.55% </td> <td> 1.41x </td> <td> 1.81% </td> <td> 1.31x </td> <td> 1.84% </td> <td> 99.80% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> liquid-render </td> <td> 186.0 </td> <td> 1.12% </td> <td> 149.4 </td> <td> 1.73% </td> <td> 162.9 </td> <td> 2.50% </td> <td> 1.25x </td> <td> 2.06% </td> <td> 1.14x </td> <td> 2.74% </td> <td> 66.66% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> activerecord </td> <td> 149.0 </td> <td> 1.50% </td> <td> 113.7 </td> <td> 1.97% </td> <td> 159.0 </td> <td> 0.89% </td> <td> 1.31x </td> <td> 2.48% </td> <td> 0.94x </td> <td> 1.75% </td> <td> 79.09% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> optcarrot </td> <td> 5495.9 </td> <td> 0.57% </td> <td> 3142.7 </td> <td> 0.22% </td> <td> 2709.7 </td> <td> 0.25% </td> <td> 1.75x </td> <td> 0.61% </td> <td> 2.03x </td> <td> 0.63% </td> <td> 96.16% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> jekyll </td> <td> 8374.7 </td> <td> 1.73% </td> <td> 7644.0 </td> <td> 2.88% </td> <td> 8330.4 </td> <td> 1.87% </td> <td> 1.10x </td> <td> 3.36% </td> <td> 1.01x </td> <td> 2.55% </td> <td> 66.85% </td>
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> railsbench </td> <td> 3117.0 </td> <td> 1.26% </td> <td> 2714.8 </td> <td> 1.55% </td> <td> 3176.3 </td> <td> 1.07% </td> <td> 1.15x </td> <td> 2.00% </td> <td> 0.98x </td> <td> 1.65% </td> <td> 74.44% </td>
			</tr>
		
	</tbody>
</table>

<p>
	<strong>RSD</strong> is relative standard deviation - the standard deviation divided by the mean, expressed as a percentage. <br/>
	<strong>% in YJIT</strong> is the percentage of instructions that complete in YJIT rather than exiting to the non-JITted interpreter. YJIT performs better when this is higher.
</p>

<p>
	You can find our benchmark code <a href="https://github.com/Shopify/yjit-bench">in the yjit-bench Github repo</a>.
	Our benchmark-runner code isn't public yet, but we plan to release it later.
</p>

<p>
	Tested Ruby version for YJIT and No-JIT: <tt><strong>ruby 3.1.0dev (2021-09-01T19:38:24Z main a83668bb26) [x86_64-linux]</strong></tt> <br/>
	Tested Ruby version for MJIT: <tt><strong>ruby 3.0.2p107 (2021-07-07 revision 0db68f0233) +JIT [x86_64-linux]</strong></tt>
</p>
