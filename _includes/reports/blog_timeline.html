<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<div id="timeline_rs_chart"></div>

<script>

// D3 line graph, based on https://www.d3-graph-gallery.com/graph/line_basic.html

// set the dimensions and margins of the graph
var margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#timeline_rs_chart")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

// I still sometimes use the Rickshaw colour palettes: https://github.com/shutterstock/rickshaw/blob/master/src/js/Rickshaw.Fixtures.Color.js


var timeParser = d3.timeParse("%Y %m %d %H %M %S");
var data_series = [
    
    {
        name: "prod_ruby_with_yjit-railsbench",
        data: [ { date: timeParser("2021 08 31 18 00 17"), value: 2841.8664596043527 }, { date: timeParser("2021 08 31 21 00 24"), value: 2797.641230613226 }, { date: timeParser("2021 09 01 14 55 24"), value: 2771.8856072053313 }, { date: timeParser("2021 09 01 21 00 24"), value: 2748.3706017024815 }, { date: timeParser("2021 09 02 09 00 16"), value: 2677.1239531226456 }, { date: timeParser("2021 09 03 15 14 38"), value: 2691.6799366939813 }, { date: timeParser("2021 09 03 17 11 30"), value: 2714.777965587564 }, { date: timeParser("2021 09 03 19 09 42"), value: 2681.4361231285147 }, { date: timeParser("2021 09 03 21 10 08"), value: 2774.169336806517 }, { date: timeParser("2021 09 03 23 10 20"), value: 2693.6555842636153 }, { date: timeParser("2021 09 04 01 29 19"), value: 2724.176667793654 }, { date: timeParser("2021 09 04 03 10 13"), value: 2684.1967821703292 }, { date: timeParser("2021 09 04 05 09 48"), value: 2713.8507200055756 }, { date: timeParser("2021 09 04 07 10 09"), value: 2682.9277965822257 }, { date: timeParser("2021 09 04 09 10 05"), value: 2718.762004596647 }, { date: timeParser("2021 09 04 11 09 53"), value: 2758.374809077941 }, { date: timeParser("2021 09 04 13 11 16"), value: 2780.340043408796 }, { date: timeParser("2021 09 04 15 10 21"), value: 2696.337628015317 }, { date: timeParser("2021 09 04 17 11 14"), value: 2730.814467894379 }, { date: timeParser("2021 09 04 19 09 28"), value: 2688.4723204770125 }, { date: timeParser("2021 09 05 07 09 35"), value: 2769.8998310719617 }, { date: timeParser("2021 09 05 19 09 04"), value: 2772.495423303917 }, { date: timeParser("2021 09 06 07 09 39"), value: 2750.089025311172 } ],
        colour: "#00cc00",
        time_range: [ timeParser("2021 08 31 18 00 17"), timeParser("2021 09 06 07 09 39") ],
        value_range: [ 2677.1239531226456, 2841.8664596043527 ]
    },
    
    {
        name: "prod_ruby_with_yjit-optcarrot",
        data: [ { date: timeParser("2021 08 31 18 00 17"), value: 3249.555807787692 }, { date: timeParser("2021 08 31 21 00 24"), value: 3214.131467603147 }, { date: timeParser("2021 09 01 14 55 24"), value: 3239.7172622091603 }, { date: timeParser("2021 09 01 21 00 24"), value: 3107.085106498562 }, { date: timeParser("2021 09 02 09 00 16"), value: 3131.8565902183764 }, { date: timeParser("2021 09 03 15 14 38"), value: 3145.3081451938488 }, { date: timeParser("2021 09 03 17 11 30"), value: 3142.7253474714234 }, { date: timeParser("2021 09 03 19 09 42"), value: 3132.0904262014665 }, { date: timeParser("2021 09 03 21 10 08"), value: 3120.612393412739 }, { date: timeParser("2021 09 03 23 10 20"), value: 3136.51050348999 }, { date: timeParser("2021 09 04 01 29 19"), value: 3115.6049505108967 }, { date: timeParser("2021 09 04 03 10 13"), value: 3128.6377334967256 }, { date: timeParser("2021 09 04 05 09 48"), value: 3129.7954829991795 }, { date: timeParser("2021 09 04 07 10 09"), value: 3119.071738817729 }, { date: timeParser("2021 09 04 09 10 05"), value: 3154.6770443907008 }, { date: timeParser("2021 09 04 11 09 53"), value: 3137.753808393609 }, { date: timeParser("2021 09 04 13 11 16"), value: 3128.6844486836344 }, { date: timeParser("2021 09 04 15 10 21"), value: 3151.958856091369 }, { date: timeParser("2021 09 04 17 11 14"), value: 3142.942788696382 }, { date: timeParser("2021 09 04 19 09 28"), value: 3137.947577505838 }, { date: timeParser("2021 09 05 07 09 35"), value: 3138.973096536938 }, { date: timeParser("2021 09 05 19 09 04"), value: 3136.3413729239255 }, { date: timeParser("2021 09 06 07 09 39"), value: 3121.4281239081174 } ],
        colour: "#0066b3",
        time_range: [ timeParser("2021 08 31 18 00 17"), timeParser("2021 09 06 07 09 39") ],
        value_range: [ 3107.085106498562, 3249.555807787692 ]
    },
    
    {
        name: "prod_ruby_with_yjit-lee",
        data: [ { date: timeParser("2021 08 31 12 39 55"), value: 1004.0319355134852 }, { date: timeParser("2021 08 31 16 00 16"), value: 1002.9474924456074 }, { date: timeParser("2021 08 31 18 00 17"), value: 1018.7169148062821 }, { date: timeParser("2021 08 31 21 00 24"), value: 1013.3359126921277 }, { date: timeParser("2021 09 01 14 55 24"), value: 995.7850495490923 }, { date: timeParser("2021 09 01 21 00 24"), value: 809.6112763353934 }, { date: timeParser("2021 09 02 09 00 16"), value: 801.9172289408743 }, { date: timeParser("2021 09 02 15 47 24"), value: 808.7335705005734 }, { date: timeParser("2021 09 03 15 14 38"), value: 806.0245071848234 }, { date: timeParser("2021 09 03 17 11 30"), value: 810.1434992626309 }, { date: timeParser("2021 09 03 19 09 42"), value: 805.1245787258571 }, { date: timeParser("2021 09 03 21 10 08"), value: 806.1652024509385 }, { date: timeParser("2021 09 03 23 10 20"), value: 806.1590418918058 }, { date: timeParser("2021 09 04 01 29 19"), value: 808.7771002668887 }, { date: timeParser("2021 09 04 03 10 13"), value: 809.9548200611025 }, { date: timeParser("2021 09 04 05 09 48"), value: 807.0967074638853 }, { date: timeParser("2021 09 04 07 10 09"), value: 801.8558868750309 }, { date: timeParser("2021 09 04 09 10 05"), value: 809.2746468028054 }, { date: timeParser("2021 09 04 11 09 53"), value: 806.7252369519944 }, { date: timeParser("2021 09 04 13 11 16"), value: 804.2114714005342 }, { date: timeParser("2021 09 04 15 10 21"), value: 811.6242674645036 }, { date: timeParser("2021 09 04 17 11 14"), value: 807.6665639411658 }, { date: timeParser("2021 09 04 19 09 28"), value: 804.6595471290251 }, { date: timeParser("2021 09 05 07 09 35"), value: 803.5394494499391 }, { date: timeParser("2021 09 05 19 09 04"), value: 809.1800355274851 }, { date: timeParser("2021 09 06 07 09 39"), value: 805.9420256021743 } ],
        colour: "#ff8000",
        time_range: [ timeParser("2021 08 31 12 39 55"), timeParser("2021 09 06 07 09 39") ],
        value_range: [ 801.8558868750309, 1018.7169148062821 ]
    },
    
    {
        name: "prod_ruby_with_yjit-activerecord",
        data: [ { date: timeParser("2021 08 31 12 39 55"), value: 120.6642676203046 }, { date: timeParser("2021 08 31 16 00 16"), value: 123.34438624336792 }, { date: timeParser("2021 08 31 18 00 17"), value: 122.34034633313838 }, { date: timeParser("2021 08 31 21 00 24"), value: 117.51364559688611 }, { date: timeParser("2021 09 01 14 55 24"), value: 120.84125964275489 }, { date: timeParser("2021 09 01 21 00 24"), value: 111.48521841969341 }, { date: timeParser("2021 09 02 09 00 16"), value: 110.7876622969045 }, { date: timeParser("2021 09 02 15 47 24"), value: 110.12671658425857 }, { date: timeParser("2021 09 03 15 14 38"), value: 111.97787681842476 }, { date: timeParser("2021 09 03 17 11 30"), value: 113.69367194129154 }, { date: timeParser("2021 09 03 19 09 42"), value: 109.09888259810799 }, { date: timeParser("2021 09 03 21 10 08"), value: 112.17999082959682 }, { date: timeParser("2021 09 03 23 10 20"), value: 111.41651618732688 }, { date: timeParser("2021 09 04 01 29 19"), value: 109.88466974299098 }, { date: timeParser("2021 09 04 03 10 13"), value: 109.75660603544594 }, { date: timeParser("2021 09 04 05 09 48"), value: 113.73112275172586 }, { date: timeParser("2021 09 04 07 10 09"), value: 113.89279879800729 }, { date: timeParser("2021 09 04 09 10 05"), value: 112.26612546676824 }, { date: timeParser("2021 09 04 11 09 53"), value: 111.08283876517667 }, { date: timeParser("2021 09 04 13 11 16"), value: 111.33977688082001 }, { date: timeParser("2021 09 04 15 10 21"), value: 109.82059063982068 }, { date: timeParser("2021 09 04 17 11 14"), value: 111.45665543359321 }, { date: timeParser("2021 09 04 19 09 28"), value: 110.97744002676846 }, { date: timeParser("2021 09 05 07 09 35"), value: 112.67303116203819 }, { date: timeParser("2021 09 05 19 09 04"), value: 114.41400532088609 }, { date: timeParser("2021 09 06 07 09 39"), value: 111.82514318408302 } ],
        colour: "#ffcc00",
        time_range: [ timeParser("2021 08 31 12 39 55"), timeParser("2021 09 06 07 09 39") ],
        value_range: [ 109.09888259810799, 123.34438624336792 ]
    },
    
    {}
]
data_series.pop();

var all_series_time_range = [ timeParser("2021 08 31 12 39 55"), timeParser("2021 09 06 07 09 39") ];
var all_series_value_range = [ 109.09888259810799, 3249.555807787692 ];

// Add X axis --> it is a date format
var x = d3.scaleTime()
  .domain(d3.extent(all_series_time_range))
  .range([ 0, width ]);
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x));

// Add Y axis
var y = d3.scaleLinear()
  .domain([0, d3.max(all_series_value_range)])
  .range([ height, 0 ]);
svg.append("g")
  .call(d3.axisLeft(y));

data_series.forEach(function(item) {
    // Add the line
    svg.append("path")
      .datum(item.data)
      .attr("fill", "none")
      .attr("stroke", item.colour)
      .attr("stroke-width", 1.5)
      .attr("d", d3.line()
        .x(function(d) { return x(d.date) })
        .y(function(d) { return y(d.value) })
        );
});

</script>
