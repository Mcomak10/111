<!-- Minimal surrounding tags. We want maximum cut-and-paste potential and browsers do well even without them. -->

<p>
	The y axis is CRuby's pure-interpreter time for the benchmark divided by the named interpreter's time (YJIT, MJIT, TruffleRuby). Taller bars mean better performance. Each benchmark is scaled to the CRuby's interpreter's mean result, so CRuby's results are always exactly 1.0.
</p>

<table>
	<thead>  <th>bench</th>  <th>No JIT (ms)</th>  <th>No JIT RSD</th>  <th>MJIT (ms)</th>  <th>MJIT RSD</th>  <th>YJIT (ms)</th>  <th>YJIT RSD</th>  <th>MJIT spd</th>  <th>MJIT spd RSD</th>  <th>YJIT spd</th>  <th>YJIT spd RSD</th>  <th>% in YJIT</th>  </thead>
	<tbody style="text-align: right;">
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/activerecord/benchmark.rb" title="activerecord repeatedly queries entries in a SQLite table with highly-random names.">activerecord</a> </td>  <td> 147.6 </td>  <td> 1.01% </td>  <td> 161.1 </td>  <td> 0.81% </td>  <td> 108.1 </td>  <td> 0.60% </td>  <td> 0.92x </td>  <td> 1.29% </td>  <td> <b>1.37x</b> </td>  <td> 1.17% </td>  <td> 81.84% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/hexapdf/benchmark.rb" title="hexapdf benchmarks the hexapdf Ruby gem by line-wrapping The Odyssey with specific line-length and font.">hexapdf</a> </td>  <td> 2849.2 </td>  <td> 0.96% </td>  <td> 2566.8 </td>  <td> 1.44% </td>  <td> 2176.5 </td>  <td> 2.44% </td>  <td> 1.11x </td>  <td> 1.73% </td>  <td> <b>1.31x</b> </td>  <td> 2.63% </td>  <td> 74.80% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/jekyll/benchmark.rb" title="jekyll reviews and rebuilds a Jekyll site, but is almost entirely scanning directories of files that didn't change.">jekyll</a> </td>  <td> 8463.0 </td>  <td> 1.99% </td>  <td> 7915.5 </td>  <td> 1.46% </td>  <td> 7388.5 </td>  <td> 1.17% </td>  <td> 1.07x </td>  <td> 2.46% </td>  <td> <b>1.15x</b> </td>  <td> 2.30% </td>  <td> 82.13% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/liquid-render/benchmark.rb" title="liquid-render renders a chosen-for-profiling Liquid theme repeatedly.">liquid-render</a> </td>  <td> 173.9 </td>  <td> 1.21% </td>  <td> 162.1 </td>  <td> 3.40% </td>  <td> 116.6 </td>  <td> 2.29% </td>  <td> 1.07x </td>  <td> 3.61% </td>  <td> <b>1.49x</b> </td>  <td> 2.59% </td>  <td> 84.86% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/mail/benchmark.rb" title="mail tests the Mail gem by repeatedly creating an email from a text file and converting it to a string for sending.">mail</a> </td>  <td> 160.2 </td>  <td> 0.41% </td>  <td> 149.6 </td>  <td> 0.68% </td>  <td> 144.6 </td>  <td> 0.28% </td>  <td> 1.07x </td>  <td> 0.79% </td>  <td> <b>1.11x</b> </td>  <td> 0.49% </td>  <td> 98.34% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/psych-load/benchmark.rb" title="psych-load repeatedly loads a small selection of YAML files taken from various OSS projects.">psych-load</a> </td>  <td> 2130.8 </td>  <td> 0.44% </td>  <td> 2236.9 </td>  <td> 0.78% </td>  <td> 1703.4 </td>  <td> 0.52% </td>  <td> 0.95x </td>  <td> 0.89% </td>  <td> <b>1.25x</b> </td>  <td> 0.68% </td>  <td> 82.03% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/railsbench/benchmark.rb" title="railsbench is a read-only tiny SQLite-backed Rails app, querying a small selection of .html.erb routes and JSON routes.">railsbench</a> </td>  <td> 2965.1 </td>  <td> 1.24% </td>  <td> 2994.4 </td>  <td> 1.16% </td>  <td> 2504.7 </td>  <td> 1.72% </td>  <td> 0.99x </td>  <td> 1.70% </td>  <td> <b>1.18x</b> </td>  <td> 2.12% </td>  <td> 80.24% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/binarytrees/benchmark.rb" title="binarytrees from the Computer Language Benchmarks Game.">binarytrees</a> </td>  <td> 363.4 </td>  <td> 0.08% </td>  <td> 235.8 </td>  <td> 0.14% </td>  <td> 282.8 </td>  <td> 2.69% </td>  <td> 1.54x </td>  <td> 0.16% </td>  <td> <b>1.28x</b> </td>  <td> 2.69% </td>  <td> 84.27% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/fannkuchredux/benchmark.rb" title="fannkuchredux from the Computer Language Benchmarks Game.">fannkuchredux</a> </td>  <td> 5491.2 </td>  <td> 0.06% </td>  <td> 3972.3 </td>  <td> 0.13% </td>  <td> 5473.6 </td>  <td> 0.05% </td>  <td> 1.38x </td>  <td> 0.14% </td>  <td> <b>1.00x</b> </td>  <td> 0.08% </td>  <td> 0.02% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/lee/benchmark.rb" title="lee is a circuit-board layout solver, deployed in a plausibly reality-like way">lee</a> </td>  <td> 1098.4 </td>  <td> 1.43% </td>  <td> 915.6 </td>  <td> 1.10% </td>  <td> 794.4 </td>  <td> 1.29% </td>  <td> 1.20x </td>  <td> 1.81% </td>  <td> <b>1.38x</b> </td>  <td> 1.92% </td>  <td> 99.93% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/nbody/benchmark.rb" title="nbody from the Computer Language Benchmarks Game.">nbody</a> </td>  <td> 110.8 </td>  <td> 0.18% </td>  <td> 60.6 </td>  <td> 0.95% </td>  <td> 75.6 </td>  <td> 0.03% </td>  <td> 1.83x </td>  <td> 0.97% </td>  <td> <b>1.47x</b> </td>  <td> 0.18% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/optcarrot/benchmark.rb" title="optcarrot is a functional headless NES emulator, run on a specific game cartridge for a specific number of frames.">optcarrot</a> </td>  <td> 4977.6 </td>  <td> 0.59% </td>  <td> 2199.0 </td>  <td> 0.52% </td>  <td> 3134.7 </td>  <td> 0.49% </td>  <td> 2.26x </td>  <td> 0.79% </td>  <td> <b>1.59x</b> </td>  <td> 0.77% </td>  <td> 96.13% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/rubykon/benchmark.rb" title="Ruby solver for Go (the boardgame.) Runs 1,000 iterations forward from an initial starting board.">rubykon</a> </td>  <td> 10606.3 </td>  <td> 0.22% </td>  <td> 6493.2 </td>  <td> 0.44% </td>  <td> 5606.7 </td>  <td> 0.53% </td>  <td> 1.63x </td>  <td> 0.50% </td>  <td> <b>1.89x</b> </td>  <td> 0.58% </td>  <td> 99.68% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/30k_ifelse.rb" title="30_ifelse tests thousands of nested methods containing simple if/else statements.">30k_ifelse</a> </td>  <td> 2211.9 </td>  <td> 0.25% </td>  <td> 2262.5 </td>  <td> 0.51% </td>  <td> 315.5 </td>  <td> 0.15% </td>  <td> 0.98x </td>  <td> 0.57% </td>  <td> <b>7.01x</b> </td>  <td> 0.29% </td>  <td> 99.99% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/30k_methods.rb" title="30_methods tests thousands of nested method calls that mostly just call out to other single-call methods.">30k_methods</a> </td>  <td> 6211.8 </td>  <td> 0.04% </td>  <td> 6017.9 </td>  <td> 2.41% </td>  <td> 756.3 </td>  <td> 0.03% </td>  <td> 1.03x </td>  <td> 2.41% </td>  <td> <b>8.21x</b> </td>  <td> 0.05% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/cfunc_itself.rb" title="cfunc_itself just calls the 'itself' method many, many times.">cfunc_itself</a> </td>  <td> 94.8 </td>  <td> 0.18% </td>  <td> 59.4 </td>  <td> 0.10% </td>  <td> 39.1 </td>  <td> 0.29% </td>  <td> 1.60x </td>  <td> 0.21% </td>  <td> <b>2.43x</b> </td>  <td> 0.34% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/fib.rb" title="Fib is a simple exponential-time recursive Fibonacci number generator.">fib</a> </td>  <td> 195.5 </td>  <td> 0.26% </td>  <td> 60.2 </td>  <td> 0.12% </td>  <td> 52.1 </td>  <td> 0.04% </td>  <td> 3.25x </td>  <td> 0.28% </td>  <td> <b>3.75x</b> </td>  <td> 0.26% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/getivar.rb" title="getivar tests the performance of getting instance variable values.">getivar</a> </td>  <td> 87.6 </td>  <td> 0.17% </td>  <td> 92.9 </td>  <td> 0.11% </td>  <td> 35.5 </td>  <td> 0.08% </td>  <td> 0.94x </td>  <td> 0.20% </td>  <td> <b>2.47x</b> </td>  <td> 0.19% </td>  <td> 86.63% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/keyword_args.rb" title="keyword_args tests the performance of method calls with keyword arguments.">keyword_args</a> </td>  <td> 231.2 </td>  <td> 0.07% </td>  <td> 184.5 </td>  <td> 0.07% </td>  <td> 45.7 </td>  <td> 0.10% </td>  <td> 1.25x </td>  <td> 0.10% </td>  <td> <b>5.06x</b> </td>  <td> 0.13% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/respond_to.rb" title="respond_to tests the performance of the respond_to? method.">respond_to</a> </td>  <td> 230.1 </td>  <td> 0.28% </td>  <td> 185.4 </td>  <td> 0.41% </td>  <td> 154.3 </td>  <td> 0.24% </td>  <td> 1.24x </td>  <td> 0.50% </td>  <td> <b>1.49x</b> </td>  <td> 0.37% </td>  <td> 100.00% </td> 
			</tr>
		
			<tr style="border: 1px solid black;">
				 <td> <a href="https://github.com/Shopify/yjit-bench/blob/main/benchmarks/setivar.rb" title="setivar tests the performance of setting instance variable values.">setivar</a> </td>  <td> 66.0 </td>  <td> 0.08% </td>  <td> 68.1 </td>  <td> 0.12% </td>  <td> 42.0 </td>  <td> 0.09% </td>  <td> 0.97x </td>  <td> 0.14% </td>  <td> <b>1.57x</b> </td>  <td> 0.13% </td>  <td> 88.07% </td> 
			</tr>
		
	</tbody>
</table>

<p>
	<strong>RSD</strong> is relative standard deviation - the standard deviation divided by the mean, expressed as a percentage. <br/>
	<strong>% in YJIT</strong> is the percentage of instructions that complete in YJIT rather than exiting to the non-JITted interpreter. YJIT performs better when this is higher.<br/>
	<strong>Speedup</strong> is relative to interpreted CRuby. So an "MJIT speedup" of 1.21x means it runs at 1.21 times the iters/second of CRuby with JIT disabled.
</p>

<p>
	You can find our benchmark code <a href="https://github.com/Shopify/yjit-bench">in the yjit-bench Github repo</a>. <br/>
	Our benchmark-runner and reporting code is <a href="https://github.com/Shopify/yjit-metrics">in the yjit-metrics Github repo</a>.
</p>

<p>
	Tested Ruby version for YJIT and No-JIT: <tt><strong>ruby 3.1.0dev (2021-11-12T08:36:39Z master 415671a282) +YJIT [x86_64-linux]</strong></tt> <br/>
	Tested Ruby version for MJIT: <tt><strong>ruby 3.0.0p0 (2020-12-25 revision 95aff21468) +JIT [x86_64-linux]</strong></tt> <br/>
	(We got much better MJIT results with released than prerelease, so we used those.)
</p>
